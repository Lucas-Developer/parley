<!DOCTYPE html>
<html>
    <head>
	<link rel="stylesheet" type="text/css" href="style/html5-doctor-reset-stylesheet.min.css">
	<link rel="stylesheet" type="text/css" href="lib/jquery-ui-1.10.3.custom/css/humanity/jquery-ui.min.css">
	<link rel="stylesheet" type="text/css" href="style/client.css">
	<link rel="stylesheet" type="text/css" href="style/autoSuggest.css">
	
	<script type="text/javascript" src="lib/jquery-2.0.2.min.js"></script>
    <script type="text/javascript" src="lang/dict.en.json"></script>

	<title>Parley</title>
    </head>
    <body class="loggedout">
        <header class="loggedin">
            <h1></h1>
            <!--<span class="email loggedin"></span>-->

            <nav>
                <button class="loggedin" name="compose" id="composeAction"></button>
                <button class="loggedin" name="open-contacts" id="contactsAction"></button>
                <button class="loggedin" name="settings" id="settingsAction"></button>
            </nav>
        </header>
	    <section id="inbox" class="NOTloggedin"><table cellspacing=2><tbody></tbody></table></section>
        <!-- <button id="refreshAction">Refresh Inbox</button> -->
        <div id="dialogWrapper"></div>


<script id="blankDialogTemplate" type="text/template">
    <div class="page page-active">
        {{#image}}<div class="image-wrapper"><img src="{{image}}"></div>{{/image}}
        {{#header}}<h2>{{header}}</h2>{{/header}}
        <p>{{message}}</p>
        {{{extra_html}}}
        <div class="buttons">
        {{#buttons}}
            <button id="{{id}}">{{text}}</button>
        {{/buttons}}
        </div>
    </div>
</script>
<script id="setupDialogTemplate" type="text/template">
	<div class="page page-splash page-active">
        <div class="splash-logo"><img src="img/logo_big.png"></div>
        <p id="text_message">{{t_message-welcome}}</p>
	    <form name="emailVerify">
			<div class="row">
	        	<label for="email">{{t_enter_your_email}}
	        		<input type="email" name="email">
				</label>
			</div>
	    </form>
	    
        <button id="emailVerify">{{t_submit}}</button>
	</div>
    <div class="page page-login">
        <h2>{{t_log_in}}</h2>
        <!--<p id="text_message">{{t_message-login}}</p>-->
        <form name="loginAction">
            <div class="row no-line">
                <label for="email" class="half">{{t_email}}
                    <input type="email" name="email" value="{{email}}" readonly>
                </label>
                <label for="password" class="half">{{t_password}}
                    <input type="password" name="password">
                </label>
                <!--<a href="#" class="extra-link">Forgot password?</a>-->
            </div>
        </form>

        <button id="loginAction">{{t_log_in}}</button>
    </div>
    <div class="page page-register">
        <h2>{{t_register}}</h2>
        <p id="text_message">{{t_message-register}}</p>
        <form name="registerAction">
            <div class="row">
                <label class="tab tab-active" for="email">{{t_email}}
                    <div class="full-width"><input type="email" name="email" id="registerEmailField" value="{{email}}" readonly>
                        <div class="status">
                            <img src="img/ajax-loader.gif" class="loader">
                        </div>
                    </div>
                </label>
            </div>
            <div class="row">
                <label for="name">{{t_name}}
                    <input type="text" name="name">
                </label>
            </div>
            <div class="row" id="passwordInfo">
                <label for="password_one" class="half">{{t_choose_password}}
                    <input type="password" name="password_one">
                </label>
                <label for="password_two" class="half">{{t_confirm_password}}
                    <input type="password" name="password_two">
                </label>
            </div>

            <div class="row">
                <p class="small-text">{{t_message-key-sendpublic}}</p>
                <label for="send_key">
                    <input type="checkbox" name="send_key">
                    {{t_publish_my_key}}
                </label>
            </div>
        </form>

        <button id="registerAction">{{t_register}}</button>

<!--
            <p>{{t_message-keygen}}</p>
            <p>
                <button id="registerAction">{{t_generate_new_key}}</button> {{t_or}} <button id="importKeyDialogAction">{{t_import_private_key}}</button>
            </p>
-->
    </div>
</script>

<script type="text/template" id="settingsDialogTemplate">
    <h4>{{t_personal_information}}</h4>
    <div class="row">
        <form name="settings">
            <label for="name">{{t_name}}
                <input type="text" value="{{name}}" name="name">
            </label>
            <label for="auto_refresh">
                <input type="checkbox" name="auto_refresh">
                {{t_auto_refresh_inbox}}
            </label>
        </form>

        <button id="saveSettingsAction">{{t_save_settings}}</button>
    </div>

    <h4>{{t_change_password}}</h4>
    <div class="row">
        <form name="changePassword">
            <div class="half">
                <label for="cur_password">{{t_current_password}}
                    <input type="password" id="curPasswordField" name="cur_password">
                </label>
            </div>
            <br>
            <div class="half">
                <label for="new_password_1">{{t_new_password}}
                    <input type="password" name="new_password_1">
                </label>
            </div>
            <div class="half">
                <label for="new_password_2">{{t_confirm_password}}
                    <input type="password" name="new_password_2">
                </label>
            </div>
        </form>

        <button id="changePasswordAction">{{t_change_password}}</button>
    </div>

    <div class="row">  </div>

    <h4>{{t_revoke_key}}</h4>
    <div class="row">
        <p>{{t_message-key-revoke}}</p>

        <button id="revokeKeyAction">{{t_revoke_and_delete}}</button>
    </div>
</script>

<script type="text/template" id="contactsDialogTemplate">
    <div class="page page-contactlist page-active">
	<input type="search" placeholder="Search..." name="contactSearch">
	<table id="contactsListTable" class="sortable">
	    <!--<thead>
		<tr><th class="thumbnail"></th><th>{{t_name}}</th><th>{{t_email}}</th><th class="buttons"></th></tr>
              </thead>-->
	    <tbody id="contactsList">
	    </tbody>
	</table>
    <button id="newContact">{{t_new_contact}}</button>
    </div>
    <div class="page page-newcontact">
    <form name="newcontact">
        <h4>{{t_add_new_contact}}</h4>
	    <div class="row">
			<label for="contact_email">{{t_email}}
				<input type="text" name="email">
			</label>

			<!--<label for="contact_name">{{t_name}}
				<input type="text" name="name">
                              </label>-->
	    </div>
        <button id="addContact">{{t_save_contact}}</button>
        <button id="backToContactlist">{{t_cancel}}</button>
    </form>
    </div>
</script>

    <script type="text/template" id="nokeyDialogTemplate">
        <p>{{t_message-nokey}}</p>
        <table class="sortable">
        <thead>
            <tr><th class="selector sorttable_nosort"><a class="clicked"></th><th>Email</th><th class="buttons"></th></tr>
        </thead>
        <tbody id="noKeyEmailsList">
            {{#emails}}
                <tr><td class="selector"><a></a></td><td class="email">{{email}}</td><td></td></tr>
            {{/emails}}
        </tbody>
        </table>
        <button id="inviteAction" name="invite">{{t_invite}}</button>
    </script>
	<script type="text/template" id="composeDialogTemplate">
	    <form id="composeForm">
		<div class="no-line row" id="recipients">
			<label for="to">{{t_to}}
				<input type="text" name="to"{{#to}} value="{{email}}"{{/to}}>
			</label>
			<!--<label {{^cc}}class="hidden" {{/cc}}for="cc">{{t_cc}}
				<input type="text" name="cc"{{#cc}} value="{{email}}"{{/cc}}>
			</label>
			<label {{^bcc}}class="hidden" {{/bcc}}for="bcc">{{t_bcc}}
				<input type="text" name="bcc">
			</label>-->
        </div>
        <div class="row">
			<label for="subject">{{t_subject}}
				<input type="text" name="subject" value="{{subject}}">
			</label>
            <label for="body">
              <textarea rows="6" name="body">{{plainText}}</textarea>
            </label>
        </div>

	    <button id="sendAction">{{t_send}}</button>

	    </form>
	</script>

	<script type="text/template" id="messageTemplate">
        <td class="selector"><a {{#selected}}class="clicked"{{/selected}}></a></td>
		<td class="from">{{#addresses}}{{#from}}{{name}}{{^name}}{{email}}{{/name}}{{/from}}{{/addresses}}</td>
		<td class="subject">{{subject}}</td>
		<td class="date"></td>
	</script>
	<script type="text/template" id="readMessageTemplate">
          <td colspan="4"><div class="buttons"><button class="reply">{{t_reply}}</button></div>{{{body}}}</td>
	</script>
	<script type="text/template" id="contactTemplate">
		<td class="thumbnail">{{#thumbnail}}<img alt="{{name}}" src="{{thumbnail}}">{{/thumbnail}}</td>
	    <td>{{name}}</td>
	    <td>{{email}}</td>
		<td class="buttons"><button data-email="{{email}}" class="send">{{t_send_email}}</button></td>
	</script>
	
	<script type="text/javascript" src="lib/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
	<script type="text/javascript" src="lib/underscore-min.js"></script>
	<script type="text/python" src="lib/parley.utility.py"></script>
	<script type="text/javascript" src="lib/parley.utility.js"></script>
	<script type="text/javascript" src="lib/backbone-min.js"></script>
	<script type="text/javascript" src="lib/mustache.js"></script>

	<script type="text/javascript" src="lib/moment.min.js"></script>

	<script type="text/javascript" src="lib/ba-linkify.min.js"></script>
	<script type="text/javascript" src="lib/jquery.i18n.min.js"></script>
	<script type="text/javascript" src="lib/polyglot.js"></script>
	<script type="text/javascript" src="lib/jquery.autoSuggest.min.js"></script>

	<script type="text/javascript" src="events.js"></script>
	<script type="text/javascript" src="client.js"></script>

    </body>
</html>
